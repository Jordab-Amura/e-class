<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>E-Class | Amura Jordan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f7f8fa;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --primary: #4f46e5;
      --primary-700: #4338ca;
      --border: #e5e7eb;
      --accent: #10b981;
      --danger: #ef4444;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
    }

    /* Layout */
    .app {
      display: grid;
      grid-template-columns: 260px 1fr;
      grid-template-rows: 64px 1fr 40px;
      grid-template-areas:
        "sidebar topbar"
        "sidebar main"
        "sidebar footer";
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      grid-area: sidebar;
      background: #111827;
      color: #e5e7eb;
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 12px;
      border-right: 1px solid #0b1220;
    }
    .brand {
      color: #ffffff;
      font-weight: 700;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand .logo {
      width: 28px; height: 28px; border-radius: 6px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
    }
    .nav {
      display: grid;
      gap: 8px;
    }
    .nav button {
      all: unset;
      background: transparent;
      padding: 10px 12px;
      border-radius: 8px;
      color: #e5e7eb;
      cursor: pointer;
      font-weight: 600;
    }
    .nav button:hover { background: #1f2937; }
    .nav button.active { background: #374151; color: #fff; }

    .spacer { flex: 1; }
    .account {
      border-top: 1px solid #1f2937;
      padding-top: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .account .avatar {
      width: 36px; height: 36px; border-radius: 50%;
      background: #374151;
    }
    .account .text { display: grid; }
    .account .text .title { font-weight: 600; }
    .account .text .sub { color: #9ca3af; font-size: 12px; }

    /* Top bar */
    .topbar {
      grid-area: topbar;
      background: var(--card);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
    }
    .topbar .title {
      font-weight: 700;
      letter-spacing: 0.3px;
    }
    .search {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .search input {
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      outline: none;
      width: 240px;
      background: #fafafa;
    }
    .search button {
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      background: var(--primary);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
    }
    .search button:hover { background: var(--primary-700); }

    /* Main */
    .main {
      grid-area: main;
      padding: 16px;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 16px;
    }

    /* Tiles */
    .tiles {
      display: grid;
      grid-template-columns: repeat(3, minmax(220px, 1fr));
      gap: 16px;
    }
    .tile {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      display: grid;
      gap: 10px;
      position: relative;
    }
    .tile .icon {
      width: 36px; height: 36px;
      border-radius: 8px;
      background: linear-gradient(135deg, #f59e0b, #ef4444);
    }
    .tile h3 {
      margin: 0;
      font-size: 16px;
    }
    .tile .count {
      color: var(--muted);
      font-size: 12px;
    }
    .tile .actions {
      display: flex;
      gap: 8px;
    }
    .btn {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #fff;
      cursor: pointer;
      font-weight: 600;
    }
    .btn.primary { border: none; background: var(--primary); color: #fff; }
    .btn.primary:hover { background: var(--primary-700); }

    /* Client's message panel */
    .panel {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 12px;
    }
    .panel h2 {
      margin: 0;
      font-size: 18px;
    }
    .messages {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
      overflow: auto;
      max-height: 320px;
      display: grid;
      gap: 10px;
      background: #fafafa;
    }
    .message {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
    }
    .message .meta {
      display: flex;
      justify-content: space-between;
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px;
    }
    .composer {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
    }
    .composer textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 200px;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      outline: none;
      background: #fafafa;
    }

    /* Footer */
    .footer {
      grid-area: footer;
      background: var(--card);
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--muted);
    }

    /* Responsive */
    @media (max-width: 980px) {
      .app {
        grid-template-columns: 64px 1fr;
      }
      .brand .title, .account .text { display: none; }
      .nav button { text-align: center; }
    }

    @media (max-width: 720px) {
      .tiles {
        grid-template-columns: 1fr;
      }
      .search input { width: 160px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">E-Class</div>
      </div>

      <nav class="nav" id="nav">
        <button data-view="dashboard" class="active">DASHBOARD</button>
        <button data-view="explorer">EXPLORER</button>
        <button data-view="message">MESSAGE</button>
      </nav>

      <div class="spacer"></div>

      <div class="account">
        <div class="avatar" aria-hidden="true"></div>
        <div class="text">
          <div class="title">ACCOUNT SETTINGS</div>
          <div class="sub">Manage profile & security</div>
        </div>
      </div>
    </aside>

    <!-- Top bar -->
    <header class="topbar">
      <div class="title">E-CLASS</div>
      <div class="search">
        <input id="searchInput" type="search" placeholder="Search classes, notes, events..." />
        <button id="searchBtn">SEARCH</button>
      </div>
    </header>

    <!-- Main content -->
    <main class="main">
      <!-- Tiles row -->
      <section class="tiles" id="tiles">
        <article class="tile" data-tile="pending">
          <div class="icon" aria-hidden="true"></div>
  <h3>PENDING CLASS</h3>
<div class="count" id="pendingCount">0 items</div>
<div class="actions">
  <button class="btn primary" id="viewPendingBtn" data-action="view-pending">View</button>
  <button class="btn" id="uploadBtn">Upload files</button>
  <input type="file" id="fileInput" multiple style="display:none" />
</div>

<div id="uploadList" aria-live="polite"></div>

<!-- Include the upload script (adjust path as needed) -->
<script src="/js/upload.js"></script>

        <article class="tile" data-tile="past">
          <div class="icon" aria-hidden="true"></div>
          <h3>PAST EVENT</h3>
          <div class="count" id="pastCount">0 items</div>
          <div class="actions">
            <button class="btn primary" data-action="view-past">View</button>
            <button class="btn" data-action="add-past">Add</button>
          </div>
        </article>

        <article class="tile" data-tile="notes">
          <div class="icon" aria-hidden="true"></div>
          <h3>NOTES</h3>
          <div class="count" id="notesCount">0 items</div>
          <div class="actions">
            <button class="btn primary" data-action="view-notes">View</button>
            <button class="btn" data-action="add-notes">Add</button>
          </div>
        </article>
      </section>

      <!-- Client's Message panel -->
      <section class="panel" id="panel">
        <h2>CLIENT'S MESSAGE</h2>
        <div class="messages" id="messages"></div>
        <div class="composer">
          <textarea id="composerInput" placeholder="Write a message..."></textarea>
          <button class="btn primary" id="sendBtn">Send</button>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      © 2027 E-CLASS
    </footer>
  </div>

  <script>
    // In-memory data store
    const store = {
      pendingClasses: [
        { id: "pc-001", title: "Algebra I — Linear Equations", due: "Tomorrow", teacher: "Ms. Kato" },
        { id: "pc-002", title: "Biology — Cell Structure", due: "Wed", teacher: "Mr. Okello" }
      ],
      pastEvents: [
        { id: "pe-101", title: "Science Fair", date: "2025-09-12" },
        { id: "pe-102", title: "Parent-Teacher Meeting", date: "2025-10-01" }
      ],
      notes: [
        { id: "n-1", title: "Photosynthesis summary", tags: ["biology"] },
        { id: "n-2", title: "Quadratic formula derivation", tags: ["math"] }
      ],
      messages: [
        { id: "m-1", from: "Client A", time: "13:05", text: "Can we reschedule the class to Friday?" },
        { id: "m-2", from: "Client B", time: "13:42", text: "Please share the notes for Algebra." }
      ],
      view: "dashboard",
      searchQuery: ""
    };

    // Helpers
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    function updateCounts() {
      $("#pendingCount").textContent = `${store.pendingClasses.length} items`;
      $("#pastCount").textContent = `${store.pastEvents.length} items`;
      $("#notesCount").textContent = `${store.notes.length} items`;
    }

    function renderMessages() {
      const container = $("#messages");
      container.innerHTML = "";
      store.messages.forEach(msg => {
        const el = document.createElement("div");
        el.className = "message";
        el.innerHTML = `
          <div class="meta">
            <span>${msg.from}</span>
            <span>${msg.time}</span>
          </div>
          <div class="text">${escapeHTML(msg.text)}</div>
        `;
        container.appendChild(el);
      });
    }

    function escapeHTML(str) {
      const div = document.createElement("div");
      div.innerText = str;
      return div.innerHTML;
    }

    function toast(message) {
      const el = document.createElement("div");
      el.style.position = "fixed";
      el.style.bottom = "20px";
      el.style.right = "20px";
      el.style.background = "rgba(17, 24, 39, 0.9)";
      el.style.color = "#fff";
      el.style.padding = "10px 12px";
      el.style.borderRadius = "8px";
      el.style.zIndex = "9999";
      el.style.boxShadow = "0 4px 20px rgba(0,0,0,0.25)";
      el.textContent = message;
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 2200);
    }

    function navigate(view) {
      store.view = view;
      // Highlight active nav button
      $$("#nav button").forEach(btn => {
        btn.classList.toggle("active", btn.dataset.view === view);
      });
      // Conditional UI (example: hide tiles in Message view)
      const tiles = $("#tiles");
      const panel = $("#panel");
      if (view === "message") {
        tiles.style.display = "none";
        panel.querySelector("h2").textContent = "CLIENT'S MESSAGE";
      } else if (view === "explorer") {
        tiles.style.display = "grid";
        panel.querySelector("h2").textContent = "Explorer — Activity";
      } else {
        tiles.style.display = "grid";
        panel.querySelector("h2").textContent = "CLIENT'S MESSAGE";
      }
    }

    function filterData(query) {
      const q = query.trim().toLowerCase();
      const match = (t) => t.toLowerCase().includes(q);
      const pending = store.pendingClasses.filter(c => match(c.title) || match(c.teacher) || match(c.due));
      const past = store.pastEvents.filter(e => match(e.title) || match(e.date));
      const notes = store.notes.filter(n => match(n.title) || (n.tags || []).some(match));
      return { pending, past, notes };
    }

    function showListModal(title, items) {
      const overlay = document.createElement("div");
      overlay.style.position = "fixed";
      overlay.style.inset = "0";
      overlay.style.background = "rgba(0,0,0,0.35)";
      overlay.style.display = "grid";
      overlay.style.placeItems = "center";
      overlay.style.zIndex = "9998";

      const modal = document.createElement("div");
      modal.style.width = "min(640px, 92vw)";
      modal.style.background = "#fff";
      modal.style.borderRadius = "12px";
      modal.style.border = `1px solid ${getComputedStyle(document.documentElement).getPropertyValue('--border')}`;
      modal.style.boxShadow = "0 10px 40px rgba(0,0,0,0.25)";
      modal.style.padding = "16px";
      modal.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
          <h3 style="margin:0;font-size:18px;">${title}</h3>
          <button class="btn" id="closeModal">Close</button>
        </div>
        <div id="modalList" style="display:grid;gap:8px; max-height: 50vh; overflow:auto;"></div>
      `;

      overlay.appendChild(modal);
      document.body.appendChild(overlay);

      $("#closeModal", modal).addEventListener("click", () => overlay.remove());
      overlay.addEventListener("click", (e) => { if (e.target === overlay) overlay.remove(); });

      const list = $("#modalList", modal);
      if (!items.length) {
        list.innerHTML = `<div style="color:#6b7280;">No items found.</div>`;
        return;
      }
      items.forEach(item => {
        const row = document.createElement("div");
        row.style.border = "1px solid var(--border)";
        row.style.borderRadius = "8px";
        row.style.padding = "10px";
        row.style.background = "#fafafa";
        row.innerHTML = `
          <div style="font-weight:600;">${escapeHTML(item.title || item.text || "Untitled")}</div>
          <div style="color:#6b7280; font-size:12px;">
            ${item.teacher ? "Teacher: " + escapeHTML(item.teacher) + " • " : ""}
            ${item.due ? "Due: " + escapeHTML(item.due) + " • " : ""}
            ${item.date ? "Date: " + escapeHTML(item.date) + " • " : ""}
            ${(item.tags && item.tags.length) ? "Tags: " + escapeHTML(item.tags.join(", ")) : ""}
          </div>
        `;
        list.appendChild(row);
      });
    }

    function promptAdd(type) {
      const title = prompt(`Add to ${type}\nEnter title:`);
      if (!title) return;
      if (type === "pending") {
        store.pendingClasses.push({ id: crypto.randomUUID(), title, due: "TBD", teacher: "Unassigned" });
      } else if (type === "past") {
        const date = new Date().toISOString().slice(0,10);
        store.pastEvents.push({ id: crypto.randomUUID(), title, date });
      } else if (type === "notes") {
        store.notes.push({ id: crypto.randomUUID(), title, tags: [] });
      }
      updateCounts();
      toast("Item added.");
    }

    // Event bindings
    function bindEvents() {
      // Nav
      $$("#nav button").forEach(btn => {
        btn.addEventListener("click", () => navigate(btn.dataset.view));
      });

      // Tiles actions
      $$(".tile .actions .btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const action = btn.dataset.action;
          if (action === "view-pending") showListModal("Pending Classes", store.pendingClasses);
          if (action === "view-past") showListModal("Past Events", store.pastEvents);
          if (action === "view-notes") showListModal("Notes", store.notes);
          if (action === "add-pending") promptAdd("pending");
          if (action === "add-past") promptAdd("past");
          if (action === "add-notes") promptAdd("notes");
        });
      });

      // Search
      $("#searchBtn").addEventListener("click", () => {
        const q = $("#searchInput").value;
        store.searchQuery = q;
        const { pending, past, notes } = filterData(q);
        showListModal(`Search results for "${escapeHTML(q)}"`, [
          ...pending.map(i => ({ ...i, title: `Pending: ${i.title}` })),
          ...past.map(i => ({ ...i, title: `Past: ${i.title}` })),
          ...notes.map(i => ({ ...i, title: `Note: ${i.title}` }))
        ]);
      });

      // Messages
      $("#sendBtn").addEventListener("click", () => {
        const text = $("#composerInput").value.trim();
        if (!text) return toast("Type a message first.");
        store.messages.push({
          id: crypto.randomUUID(),
          from: "You",
          time: new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }),
          text
        });
        $("#composerInput").value = "";
        renderMessages();
        toast("Message sent.");
      });
    }

    // Init
    updateCounts();
    renderMessages();
    bindEvents();
    navigate(store.view);
  </script>
</body>
</html>

